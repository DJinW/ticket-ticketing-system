{"remainingRequest":"C:\\Users\\安姿铜\\Desktop\\TrainTicketSystem-master\\train-user\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\安姿铜\\Desktop\\TrainTicketSystem-master\\train-user\\src\\views\\DetailOrder.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\安姿铜\\Desktop\\TrainTicketSystem-master\\train-user\\src\\views\\DetailOrder.vue","mtime":1617708212000},{"path":"C:\\Users\\安姿铜\\Desktop\\TrainTicketSystem-master\\train-user\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1695374980619},{"path":"C:\\Users\\安姿铜\\Desktop\\TrainTicketSystem-master\\train-user\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1695374980671},{"path":"C:\\Users\\安姿铜\\Desktop\\TrainTicketSystem-master\\train-user\\node_modules\\babel-loader\\lib\\index.js","mtime":1695374980610},{"path":"C:\\Users\\安姿铜\\Desktop\\TrainTicketSystem-master\\train-user\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1695374980619},{"path":"C:\\Users\\安姿铜\\Desktop\\TrainTicketSystem-master\\train-user\\node_modules\\vue-loader\\lib\\index.js","mtime":1695374999645}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IERpYWxvZyB9IGZyb20gJ3ZhbnQnOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRldGFpbG9yZGVyaWQ6JycsCiAgICAgIHNob3dmbGFnOmZhbHNlLAogICAgICAgb3JkZXI6ewogICAgICAgIGlkOiAxMTAwMDAwMDA0LAogICAgICAgIGlkY2FyZDogIjMzMDIxNDU2ODc1NDEyMzU4OSIsCiAgICAgICAgcmVhbG5hbWU6ICLlsI/mnY4iLAogICAgICAgIHNlYXR0eXBlOiAyLAogICAgICAgIHN0YXR1czogMiwKICAgICAgICBjYXJyaWFnZTogMSwKICAgICAgICBzZWF0OiAiMDFBIiwKICAgICAgICB0cmFpbmRhdGU6ICIyMDIwLTA2LTIzIiwKICAgICAgICBjcmVhdGV0aW1lOiAiMjAyMC0wNi0yMVQwOTo1MTozMS4wMDArMDAwMCIsCiAgICAgICAgdHJhaW5uYW1lOiAiRzEwMiIsCiAgICAgICAgcHJpY2U6IDI1LjAwLAogICAgICAgIG9yZGVySWQ6IDEsCiAgICAgICAgZHVyYXRpb246ICIyNeWIhuenjSIsCiAgICAgICAgc3RhcnRjaXR5OiAi5p2t5beeIiwKICAgICAgICBzdGFydHRpbWU6ICIxNToxMTo1NSIsCiAgICAgICAgZW5kY2l0eTogIuWugeazoiIsCiAgICAgICAgZW5kdGltZTogIjE1OjU5OjUyIiwKICAgICAgICB0cmFpbmlkOicxJwogICAgICB9CiAgICB9OwogIH0sCiAgY3JlYXRlZCgpewogICAgaWYoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnZGV0YWlsb3JkZXJpZCcpIT1udWxsKXsKICAgICAgdGhpcy5kZXRhaWxvcmRlcmlkPXNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2RldGFpbG9yZGVyaWQnKTsKICAgICAgdGhpcy5xdWVyeW9yZGVyKCk7CiAgICB9CiAgfSwKICBjb21wdXRlZDp7CiAgICBzdGF0ZXMoKXsKICAgICAgdmFyIHN0YXRlPScnOwogICAgICAgaWYodGhpcy5vcmRlci5zdGF0dXM9PTEpCiAgICAgICAgc3RhdGU9J+W3sumihOiuoic7CiAgICAgIGlmKHRoaXMub3JkZXIuc3RhdHVzPT0yKQogICAgICAgIHN0YXRlPSflt7LmlK/ku5gnOwogICAgICBpZih0aGlzLm9yZGVyLnN0YXR1cz09MykKICAgICAgICBzdGF0ZT0n5bey5Ye66KGMJzsKICAgICAgaWYodGhpcy5vcmRlci5zdGF0dXM9PTQpCiAgICAgICAgc3RhdGU9J+W3sumAgOasvic7CiAgICAgIGlmKHRoaXMub3JkZXIuc3RhdHVzPT01KQogICAgICAgIHN0YXRlPSflt7LmlLnnrb4nOwogICAgICByZXR1cm4gc3RhdGU7CiAgICB9LAoKICAgIG9yZGVyc3RhdGUxKCl7CiAgICAgIGlmKHRoaXMub3JkZXIuc3RhdHVzPT0yKXsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0sCiAgICBvcmRlcnN0YXRlMigpewogICAgICBpZih0aGlzLm9yZGVyLnN0YXR1cz09NXx8dGhpcy5vcmRlci5zdGF0dXM9PTIpewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICB9LAogIG1ldGhvZHM6IHsKICAgIGJhY2soKXsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goIm9yZGVyIik7CiAgICB9LAogICAgZWRpdHRpY2tldCgpewogICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdzdHJhdGNpdHknLHRoaXMub3JkZXIuc3RhcnRjaXR5KTsKICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnZW5kY2l0eScsdGhpcy5vcmRlci5lbmRjaXR5KTsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9jaGFuZ2V0aWNrZXQnKTsKICAgIH0sCiAgICByZXR1cm50aWNrZXQoKXsKICAgICAgRGlhbG9nLmNvbmZpcm0oewogICAgICB0aXRsZTogJ+mAgOelqOehruiupCcsCiAgICAgIG1lc3NhZ2U6ICfmmK/lkKbpgInmi6npgIDnpagnLAogICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgdGhpcy5kZWxldGVvcmRlcigpOwogICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgLy8gb24gY2FuY2VsCiAgICAgICAgfSk7CiAgICB9LAogIC8vIOafpeivouiuouWNleaOpeWPowogIHF1ZXJ5b3JkZXIoKXsKICAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICAgIC8vIOS4i+WNlWlkCiAgICAgIC8vIOaOpeWPo+afpeivogogICAgICB0aGlzLiRheGlvcyh7CiAgICAgICAgbWV0aG9kOidnZXQnLAogICAgICAgIHVybDonL29yZGVyL2dldGRldGFpbG9yZGVyJywKICAgICAgICBwYXJhbXM6ewogICAgICAgICAgaWQ6dGhpcy5kZXRhaWxvcmRlcmlkCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uKHJlcyl7CiAgICAgICAgaWYocmVzLmRhdGEuY29kZT09MjAwKXsKICAgICAgICAgIHRoYXQub3JkZXIgPSByZXMuZGF0YS5kYXRhCiAgICAgICAgICAgdGhhdC5zaG93ZmxhZz10cnVlOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIH0pOwogIH0sCiAgLy8g5Yig6Zmk6K6i5Y2V5o6l5Y+jCiAgZGVsZXRlb3JkZXIoKXsKICAgIGxldCB0aGF0PXRoaXM7CiAgICAgIHRoaXMuJGF4aW9zKHsKICAgICAgICBtZXRob2Q6J3Bvc3QnLAogICAgICAgIHVybDonL29yZGVyL2RlbGV0ZW9yZGVyJywKICAgICAgICBkYXRhOnRoaXMub3JkZXIKICAgICAgfSkudGhlbihmdW5jdGlvbihyZXMpewogICAgICAgIGlmKHJlcy5kYXRhLmNvZGU9PTIwMCl7CiAgICAgICAgICB0aGF0LiR0b2FzdCgi6YCA56Wo5oiQ5YqfIik7CiAgICAgICAgICB0aGF0LiRyb3V0ZXIucHVzaCgnL29yZGVyJykKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICB9KTsKICB9Cn0KfQo="},{"version":3,"sources":["DetailOrder.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DetailOrder.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"bac\" v-if=\"showflag\">\n    <van-nav-bar\n      title=\"订单详情\">\n     <template #left>\n    <i class=\"el-icon-arrow-left\" @click=\"back\"></i>\n  </template>\n    </van-nav-bar>\n    <!-- 订单卡片 -->\n    \n  <div class=\"card\">\n         <div  class=\"text item\">\n          <div class=\"state\">\n            <div>{{this.states}}</div>\n            <div class=\"price\">￥{{order.price}}</div>\n          </div>\n          <el-card class=\"box-card\">\n              <van-row>\n                <van-col span=\"4\" class=\"otherinfo\">{{order.trainname}}</van-col>\n                <van-col span=\"7\" class=\"city\">{{order.startcity}}</van-col>\n                <van-col span=\"6\"><i class=\"trainicon\" /></van-col>\n                <van-col span=\"7\" class=\"city\">{{order.endcity}}</van-col>\n              </van-row>\n              <van-row >\n                <van-col span=\"7\" offset=\"4\" class=\"times\">{{order.traindate}} {{order.starttime}}</van-col>\n                <van-col span=\"6\" id=\"traindate\">{{order.duration}}</van-col>\n                <van-col span=\"7\"  class=\"times\">{{order.traindate}} {{order.starttime}}</van-col>\n              </van-row>\n               <van-row >\n              <van-col span=\"8\" offset=\"16\" class=\"otherinfo\">{{order.carriage}}车{{order.seat}}座</van-col>\n               </van-row>\n              <van-divider dashed/>\n              <van-row class=\"userinfo\">\n                <van-col span=\"6\" >{{order.realname}}</van-col>\n                <van-col span=\"18\"  offse=\"5\">身份证:{{order.idcard}}</van-col>\n              </van-row>\n               <van-row class=\"userinfo\">\n                <van-col span=\"6\" >{{order.seattype}}等座</van-col>\n                <van-col span=\"6\" offset=\"6\">总价  ￥{{order.price}}</van-col>\n              </van-row>\n              \n             \n        </el-card>\n         </div>\n         <van-button icon=edit type=\"info\" @click=\"editticket\" :disabled=\"orderstate1\">改签</van-button>\n         <van-button icon=after-sale type=\"info\" @click=\"returnticket\" :disabled=\"orderstate2\">退票</van-button>\n  </div>\n  </div>\n</template>\n\n<script>\nimport { Dialog } from 'vant';\nexport default {\n  data() {\n    return {\n      detailorderid:'',\n      showflag:false,\n       order:{\n        id: 1100000004,\n        idcard: \"330214568754123589\",\n        realname: \"小李\",\n        seattype: 2,\n        status: 2,\n        carriage: 1,\n        seat: \"01A\",\n        traindate: \"2020-06-23\",\n        createtime: \"2020-06-21T09:51:31.000+0000\",\n        trainname: \"G102\",\n        price: 25.00,\n        orderId: 1,\n        duration: \"25分种\",\n        startcity: \"杭州\",\n        starttime: \"15:11:55\",\n        endcity: \"宁波\",\n        endtime: \"15:59:52\",\n        trainid:'1'\n      }\n    };\n  },\n  created(){\n    if(sessionStorage.getItem('detailorderid')!=null){\n      this.detailorderid=sessionStorage.getItem('detailorderid');\n      this.queryorder();\n    }\n  },\n  computed:{\n    states(){\n      var state='';\n       if(this.order.status==1)\n        state='已预订';\n      if(this.order.status==2)\n        state='已支付';\n      if(this.order.status==3)\n        state='已出行';\n      if(this.order.status==4)\n        state='已退款';\n      if(this.order.status==5)\n        state='已改签';\n      return state;\n    },\n\n    orderstate1(){\n      if(this.order.status==2){\n          return false;\n      }\n      return true;\n    },\n    orderstate2(){\n      if(this.order.status==5||this.order.status==2){\n          return false;\n      }\n      return true;\n    }\n\n  },\n  methods: {\n    back(){\n      this.$router.push(\"order\");\n    },\n    editticket(){\n      sessionStorage.setItem('stratcity',this.order.startcity);\n      sessionStorage.setItem('endcity',this.order.endcity);\n      this.$router.push('/changeticket');\n    },\n    returnticket(){\n      Dialog.confirm({\n      title: '退票确认',\n      message: '是否选择退票',\n    }).then(() => {\n        this.deleteorder();\n      }).catch(() => {\n        // on cancel\n        });\n    },\n  // 查询订单接口\n  queryorder(){\n     let that = this;\n      // 下单id\n      // 接口查询\n      this.$axios({\n        method:'get',\n        url:'/order/getdetailorder',\n        params:{\n          id:this.detailorderid\n        }\n      }).then(function(res){\n        if(res.data.code==200){\n          that.order = res.data.data\n           that.showflag=true;\n        }\n      }).catch(function (error) {\n          console.log(error);\n      });\n  },\n  // 删除订单接口\n  deleteorder(){\n    let that=this;\n      this.$axios({\n        method:'post',\n        url:'/order/deleteorder',\n        data:this.order\n      }).then(function(res){\n        if(res.data.code==200){\n          that.$toast(\"退票成功\");\n          that.$router.push('/order')\n        }\n      }).catch(function (error) {\n          console.log(error);\n      });\n  }\n}\n}\n</script>\n\n<style lang=\"less\" scoped>\n\n.bac{\n  background-color:#f8f8f8;\n  position: fixed;\n  height: 100%; \n  width: 100%;\n}\n.van-nav-bar{\n  background-color: rgba(0, 170, 238, 1);\n  position: fixed;\n  width: 100%;\n}\n/deep/.van-nav-bar__title{\n  color: white;\n}\n/deep/.van-tab{\n  background-color:#f8f8f8;\n}\n.el-icon-arrow-left{\n margin-left: 0 !important;\n color: white;\n font-size: 22px;\n}\n/deep/.el-card__body{\n  padding:8px;\n}\n\n.state{\n  display: flex;\n  justify-content: space-between;\n  padding: 10px 20px;\n  font-size: 20px;\n  background-color: white;\n  border-radius: 10px;\n  margin: 0 10px;\n}\n.price{\n  color: red;\n}\n.card{\n  height: 100%;\n  padding-top: 55px;\n}\n.box-card{\n  background: #fbfbfb;\n  border-radius: 10px;\n  margin: 10px;\n}\n.trainicon{\n  background-color: red;\n  height: 20px;\n  width:65px;\n  display: inline-block;\n  background: url('../assets/order/arrive1.png') no-repeat;\n}\n.city{\n  font-size: 20px;\n  font-weight: bold;\n}\n.otherinfo{\n  font-size: 18px;\n  margin-top: 5px;\n}\n#traindate{\n  color: #aaa;\n  font-size: 14px;\n}\n.times{\n  color: rgba(0, 170, 238, 1);\n  font-size: 13px;\n}\n.userinfo{\n  font-size: 14px;\n}\n.van-button{\n  padding: 0 40px;\n  margin: 10px 20px;\n}\n</style>"]}]}