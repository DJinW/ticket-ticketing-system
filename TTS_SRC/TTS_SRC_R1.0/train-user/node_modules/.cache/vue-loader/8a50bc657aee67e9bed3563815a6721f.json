{"remainingRequest":"C:\\Users\\安姿铜\\Desktop\\TrainTicketSystem-master\\train-user\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\安姿铜\\Desktop\\TrainTicketSystem-master\\train-user\\src\\views\\register.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\安姿铜\\Desktop\\TrainTicketSystem-master\\train-user\\src\\views\\register.vue","mtime":1617708212000},{"path":"C:\\Users\\安姿铜\\Desktop\\TrainTicketSystem-master\\train-user\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1695374980619},{"path":"C:\\Users\\安姿铜\\Desktop\\TrainTicketSystem-master\\train-user\\node_modules\\babel-loader\\lib\\index.js","mtime":1695374980610},{"path":"C:\\Users\\安姿铜\\Desktop\\TrainTicketSystem-master\\train-user\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1695374980619},{"path":"C:\\Users\\安姿铜\\Desktop\\TrainTicketSystem-master\\train-user\\node_modules\\vue-loader\\lib\\index.js","mtime":1695374999645}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFycwogICAgdmFyIHZhbGlkYXRlUGFzc3dvcmQgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7CiAgICAgICAgaWYgKHZhbHVlID09PSAnJykgewogICAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCfor7flho3mrKHovpPlhaXlr4bnoIEnKSk7CiAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSAhPT0gdGhpcy5ydWxlRm9ybS5wYXNzd29yZCkgewogICAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCfkuKTmrKHovpPlhaXlr4bnoIHkuI3kuIDoh7QhJykpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjYWxsYmFjaygpOwogICAgICAgIH0KICAgICAgfTsKICAgICAgcmV0dXJuIHsKICAgICAgICAKICAgICAgICBydWxlRm9ybTogewogICAgICAgICAgdXNlcm5hbWU6ICcnLAogICAgICAgICAgcGFzc3dvcmQ6ICcnLAogICAgICAgICAgY29uZmlybTonJywKICAgICAgICAgIHJlZ2lvbjonMCcsCiAgICAgICAgICBpZGNhcmQ6ICcnLAogICAgICAgICAgcmVhbG5hbWU6ICcnLAogICAgICAgICAgcGhvbmU6JycsCiAgICAgICAgICB0eXBlOicwJywKICAgICAgICAgIHN0YXR1czowLAogICAgICAgICAgY2hlY2tlZDogZmFsc2UsCiAgICAgICAgfSwKICAgICAgICBydWxlczogewogICAgICAgICAgdXNlcm5hbWU6IFsKICAgICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+Whq+WGmeeUqOaIt+WQjScsIHRyaWdnZXI6ICdibHVyJyB9LAogICAgICAgICAgICB7IG1pbjogMywgbWF4OiAxNSwgbWVzc2FnZTogJ+mVv+W6puWcqCAzIOWIsCAxNSDkuKrlrZfnrKYnLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgICAgXSwKICAgICAgICAgIHBhc3N3b3JkOiBbCiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXlr4bnoIEnLCB0cmlnZ2VyOiAnYmx1cicgfSwKICAgICAgICAgICAgeyBtaW46IDYsIG1heDogMTUsIG1lc3NhZ2U6ICfplb/luqblnKggNiDliLAgMTUg5Liq5a2X56ymJywgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICAgIF0sCiAgICAgICAgIGNvbmZpcm06IFsKICAgICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSx2YWxpZGF0b3I6dmFsaWRhdGVQYXNzd29yZCwgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICAgXSwKICAgICAgICAgcGhvbmU6WwogICAgICAgICAgIHttaW46IDExLCBtYXg6IDExLCBtZXNzYWdlOiAn6K+36L6T5YWl5q2j56Gu55qE5omL5py65Y+3JywgdHJpZ2dlcjogJ2JsdXInfQogICAgICAgICBdCiAgICAgICAgfQogICAgICB9OwogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgb3BlbigpIHsKICAgICAgICB0aGlzLiRkaWFsb2cuYWxlcnQoewogICAgICAgIG1lc3NhZ2U6ICfpk4Hot6/ljY/orq7vvIx4eHh4eHh4JywKICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgLy8gb24gY2xvc2UKICAgICAgfSk7CiAgICAgIH0sCiAgICAgIGJhY2soKXsKICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oLTEpCiAgICAgIH0sCiAgICAgIHN1Ym1pdEZvcm0oZm9ybU5hbWUpIHsKICAgICAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICAgICAgaWYoIXRoaXMucnVsZUZvcm0uY2hlY2tlZCl7CiAgICAgICAgICB0aGlzLiRub3RpZnkoeyB0eXBlOiAnd2FybmluZycsIG1lc3NhZ2U6ICfor7fli77pgInnlKjmiLfljY/orq4nIH0pOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgdGhpcy4kcmVmc1tmb3JtTmFtZV0udmFsaWRhdGUoKHZhbGlkKSA9PiB7CiAgICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgICAgdGhpcy4kdG9hc3QubG9hZGluZyh7CiAgICAgICAgICAgIGR1cmF0aW9uOjMwMCwKICAgICAgICAgICAgbWVzc2FnZTogJ+azqOWGjOS4rScsCiAgICAgICAgICAgIGZvcmJpZENsaWNrOiB0cnVlLAogICAgICAgICAgfSk7CiAgICAgICAgICAgIHRoYXQucnVsZUZvcm0ucGFzc3dvcmQ9dGhhdC4kbWQ1KHRoYXQucnVsZUZvcm0ucGFzc3dvcmQpOwogICAgICAgICAgICB0aGlzLiRheGlvcyh7CiAgICAgICAgICAgICAgbWV0aG9kOidwb3N0JywKICAgICAgICAgICAgICB1cmw6Jy91c2VyL3JlZ2lzdGVyJywKICAgICAgICAgICAgICBkYXRhOiB0aGlzLnJ1bGVGb3JtCiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24ocmVzKXsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpCiAgICAgICAgICAgICAgaWYocmVzLmRhdGEuY29kZT09MjAwKXsKICAgICAgICAgICAgICAgIHRoYXQuJG5vdGlmeSh7IHR5cGU6ICdzdWNjZXNzJywgbWVzc2FnZTogJ+azqOWGjOaIkOWKnycgfSk7CiAgICAgICAgICAgICAgICB0aGF0LiRyb3V0ZXIucHVzaCgiLyIpCiAgICAgICAgICAgICAgfWVsc2UgaWYocmVzLmRhdGEuY29kZT09MzAyKXsKICAgICAgICAgICAgICAgICB0aGF0LiRub3RpZnkoeyB0eXBlOiAnd2FybmluZycsIG1lc3NhZ2U6ICfnlKjmiLflkI3lt7Looqvms6jlhownIH0pOwogICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgdGhhdC4kbm90aWZ5KHsgdHlwZTogJ3dhcm5pbmcnLCBtZXNzYWdlOiAn5rOo5YaM5aSx6LSlJyB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuJG5vdGlmeSh7IHR5cGU6ICd3YXJuaW5nJywgbWVzc2FnZTogJ+azqOWGjOWksei0pScgfSk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvciBzdWJtaXQhIScpOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIAogICAgfQp9Cg=="},{"version":3,"sources":["register.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"register.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"register_container\">\n    <div class=\"header\">\n    <el-row :gutter=\"20\">\n      <el-col :span=\"3\" :offset=\"1\"><i class=\"el-icon-arrow-left\" @click=\"back\"></i></el-col>\n      <el-col :span=\"6\" :offset=\"7\"><div>注册</div></el-col>\n    </el-row>\n      </div>\n\n     \n\n    <el-form :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"80px\" class=\"demo-ruleForm\">\n\n      <el-form-item label=\"用户名\" prop=\"name\">\n        <el-input v-model=\"ruleForm.username\" placeholder=\"字母、数字或'_',3-15位\"></el-input>\n      </el-form-item>\n       <el-form-item  label=\"密码\" prop=\"password\">\n        <el-input type=\"password\" v-model=\"ruleForm.password\" placeholder=\"6-15位\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"确认密码\" prop=\"confirm\">\n        <el-input type=\"password\" v-model=\"ruleForm.confirm\" placeholder=\"请再次确认密码\"></el-input>\n      </el-form-item>\n\n\n      <el-form-item label=\"证件类型\">\n        <el-select type=\"password\" v-model=\"ruleForm.region\" placeholder=\"请选择\" style=\"width: 100%;\">\n        <el-option label=\"中国居民身份证\" value=\"0\"></el-option>\n        </el-select>\n    </el-form-item>\n\n    <el-form-item label=\"证件号码\" prop=\"idcard\">\n        <el-input v-model=\"ruleForm.idcard\" placeholder=\"证件号\"></el-input>\n      </el-form-item>\n    <el-form-item label=\"真实姓名\" prop=\"realname\">\n        <el-input v-model=\"ruleForm.realname\" placeholder=\"请输入真实姓名，以便购票\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"联系方式\" prop=\"phone\">\n        <el-input v-model=\"ruleForm.phone\" placeholder=\"请准确填写您的手机号\"></el-input>\n      </el-form-item>\n      \n       <el-form-item label=\"旅客类型\">\n        <el-select  v-model=\"ruleForm.type\" placeholder=\"请选择旅客类型\" style=\"width: 100%;\">\n        <el-option label=\"成人\" value=\"0\"></el-option>\n        <el-option label=\"学生\" value=\"1\"></el-option>\n        </el-select>\n    </el-form-item>\n    <el-form-item>\n      <el-checkbox v-model=\"ruleForm.checked\"><el-button type=\"text\" @click=\"open\">我已阅读铁路相关部门协议</el-button></el-checkbox>\n    </el-form-item>\n      <el-button type=\"primary\" @click=\"submitForm('ruleForm')\">注册</el-button>\n\n</el-form>\n  </div>\n</template>\n\n<script>\n\nexport default {\n  data() {\n    // eslint-disable-next-line no-unused-vars\n    var validatePassword = (rule, value, callback) => {\n        if (value === '') {\n          callback(new Error('请再次输入密码'));\n        } else if (value !== this.ruleForm.password) {\n          callback(new Error('两次输入密码不一致!'));\n        } else {\n          callback();\n        }\n      };\n      return {\n        \n        ruleForm: {\n          username: '',\n          password: '',\n          confirm:'',\n          region:'0',\n          idcard: '',\n          realname: '',\n          phone:'',\n          type:'0',\n          status:0,\n          checked: false,\n        },\n        rules: {\n          username: [\n            { required: true, message: '请填写用户名', trigger: 'blur' },\n            { min: 3, max: 15, message: '长度在 3 到 15 个字符', trigger: 'blur' }\n          ],\n          password: [\n            { required: true, message: '请输入密码', trigger: 'blur' },\n            { min: 6, max: 15, message: '长度在 6 到 15 个字符', trigger: 'blur' }\n          ],\n         confirm: [\n            { required: true,validator:validatePassword, trigger: 'blur' }\n         ],\n         phone:[\n           {min: 11, max: 11, message: '请输入正确的手机号', trigger: 'blur'}\n         ]\n        }\n      };\n    },\n    methods: {\n      open() {\n        this.$dialog.alert({\n        message: '铁路协议，xxxxxxx',\n      }).then(() => {\n        // on close\n      });\n      },\n      back(){\n        this.$router.go(-1)\n      },\n      submitForm(formName) {\n        let that = this;\n        if(!this.ruleForm.checked){\n          this.$notify({ type: 'warning', message: '请勾选用户协议' });\n          return;\n        }\n\n        this.$refs[formName].validate((valid) => {\n          if (valid) {\n            this.$toast.loading({\n            duration:300,\n            message: '注册中',\n            forbidClick: true,\n          });\n            that.ruleForm.password=that.$md5(that.ruleForm.password);\n            this.$axios({\n              method:'post',\n              url:'/user/register',\n              data: this.ruleForm\n            }).then(function(res){\n              console.log(res)\n              if(res.data.code==200){\n                that.$notify({ type: 'success', message: '注册成功' });\n                that.$router.push(\"/\")\n              }else if(res.data.code==302){\n                 that.$notify({ type: 'warning', message: '用户名已被注册' });\n              }else{\n                that.$notify({ type: 'warning', message: '注册失败' });\n              }\n            }).catch(function (error) {\n              console.log(error);\n              });\n          } else {\n            this.$notify({ type: 'warning', message: '注册失败' });\n            console.log('error submit!!');\n            return false;\n          }\n        });\n      },\n      \n    }\n}\n</script>\n<style lang=\"less\" scoped>\n.el-row {\n    margin-bottom: 20px;\n    &:last-child {\n      margin-bottom: 0;\n    }\n  }\n.register_container{\n   height: 100%;\n   width: 100%;\n   overflow: hidden;\n   position: absolute;\n   background: url(\"../assets/bac.jpg\") no-repeat;\n   background-size: 100% 100%;\n}\n.el-icon-arrow-left{\n margin-left: 0 !important;\n}\n.header{\n  text-align: left;\n  background-color:#8ec1f757;\n  font-size: 20px;\n  color: white;\n  line-height: 50px;\n}\n\n.el-form{\n\n  margin: 20px auto;\n  width: 92%;\n}\n.el-form /deep/ .el-input__icon{\n  line-height: 40px !important;\n}\n.el-form /deep/ .el-form-item__label{\n  color: #d0d0d0 !important;\n}\n.el-form /deep/ .el-form-item__content{\n  text-align: left;\n  margin: 0;\n}\n.el-form-item{\n  margin-bottom: 20px;\n}\n.el-button{\n  margin-top: 0 !important;\n}\n</style>"]}]}